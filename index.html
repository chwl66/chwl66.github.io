<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    æ¸©æ•…çŸ¥æ–°
</title>
<link rel="shortcut icon" href="https://chwl66.github.io/favicon.ico?v=1574387850326">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://chwl66.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://chwl66.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://chwl66.github.io">
                <img class="avatar" src="https://chwl66.github.io/images/avatar.png?v=1574387850326" alt="">
            </a>
            <div class="site-title">
                <h1>
                    æ¸©æ•…çŸ¥æ–°
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://chwl66.github.io/post/OVI5xWH9j">
                        AriaNg + rclone å®ç° Google Drive ç¦»çº¿ä¸‹è½½
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-11-22</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            å‡†å¤‡ç¯å¢ƒ

ä¸€å° vps ä¸»æœºï¼Œåšä¸»ä½¿ç”¨ CentOS è¿›è¡Œæ¼”ç¤º
å†…å­˜ &amp;gt;= 512MB
KVM æ¶æ„
ç¡¬ç›˜æœ€å¥½ &amp;gt;= 10G
ä¸€ä¸ªè°·æ­Œ Drive è´¦å·

æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…å¿…é¡»ç»„ä»¶ï¼Œæ­¤å¤„å®‰è£… nginx web æœåŠ¡å™¨ã€‚
yum -y update
yum -y install epel-release
yum -y install wget git unzip gcc gcc-c++ openssl-devel nginx

å¯åŠ¨ nginx å¹¶è®¾ç½®å¼€æœºè‡ªå¯
systemctl start nginx
systemctl enable nginx.service
systemctl stop firewalld # å…³é—­é˜²ç«å¢™

è¿™ä¸ªæ—¶å€™å¯ä»¥è®¿é—®æœåŠ¡å™¨çš„å¤–ç½‘ IP æŸ¥çœ‹ nginx å¯åŠ¨æˆåŠŸã€‚
å®‰è£… AriaNg
å®‰è£… aria2
Aria2 æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œä¸‹è¿è¡Œã€å¤šåè®®ã€å¤šæ¥æºä¸‹è½½å·¥å…·ï¼Œæ”¯æŒç£åŠ›é“¾æ¥ã€BT ç§å­ã€HTTPã€FTP ç­‰ä¸‹è½½åè®®ï¼Œå½“ç„¶å› ä¸ºå®ƒæ˜¯å‘½ä»¤è¡Œä¸‹è½½å·¥å…·ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³ä¸‹è½½ä¸€ä¸ªä¸œè¥¿è¿˜éœ€è¦å»æ•²å‘½ä»¤è‡ªç„¶æ˜¯ä¸æ–¹ä¾¿ï¼Œäºæ˜¯å°±æœ‰ä¸€äº›äººæ ¹æ® Aria2 çš„ API å¼€å‘äº†ä¸€äº›åœ¨çº¿ç®¡ç†é¢æ¿ï¼Œå¯ä»¥ç›´æ¥åœ¨ç½‘é¡µä¸Šé¢æ·»åŠ ç®¡ç†ä»»åŠ¡ã€‚

å…ˆå®‰è£… aria2 æœåŠ¡ç«¯ï¼Œä½¿ç”¨é€—æ¯”å¤§ä½¬çš„è„šæœ¬
wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/aria2.sh &amp;amp;&amp;amp; chmod +x aria2.sh &amp;amp;&amp;amp; bash aria2.sh

è¿è¡Œè„šæœ¬åä¼šå‡ºç°è„šæœ¬æ“ä½œèœå•ï¼Œé€‰æ‹©å¹¶è¾“å…¥ 1 å°±ä¼šå¼€å§‹å®‰è£…ã€‚
Aria2 ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬ [vx.x.x]
-- Toyo | doub.io/shell-jc4 --
 
 1. å‡çº§è„šæœ¬
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 1. å®‰è£… Aria2
 2. æ›´æ–° Aria2
 3. å¸è½½ Aria2
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 4. å¯åŠ¨ Aria2
 5. åœæ­¢ Aria2
 6. é‡å¯ Aria2
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 7. ä¿®æ”¹ é…ç½®æ–‡ä»¶
 8. æŸ¥çœ‹ é…ç½®ä¿¡æ¯
 9. æŸ¥çœ‹ æ—¥å¿—ä¿¡æ¯
10. é…ç½® è‡ªåŠ¨æ›´æ–° BT-TrackeræœåŠ¡å™¨
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 
å½“å‰çŠ¶æ€: å·²å®‰è£… å¹¶ å·²å¯åŠ¨
 
è¯·è¾“å…¥æ•°å­— [0-10]:

å®‰è£…æˆåŠŸåé…ç½®æ–‡ä»¶åœ¨ /root/.aria2/aria2.confï¼Œå‡ ä¸ªæ¯”è¾ƒé‡è¦çš„é…ç½®ï¼š
# aria2 ä¸‹è½½æ–‡ä»¶åæ‰€åœ¨ç›®å½•
dir=/usr/local/caddy/www/aria2/Download
# aria2 RPC ç›‘å¬ç«¯å£
rpc-listen-port=6800
# aria2 RPC ç§˜é’¥
rpc-secret=codesofun
# ä¸‹è½½æˆåŠŸåæ‰§è¡Œçš„è„šæœ¬
on-download-complete=/root/rcloneupload.sh

å°†ä¸‹è½½ç›®å½•ä¿®æ”¹ä¸º /data/Download
åˆ›å»ºç›®å½•
mkdir -p /data/Download

è¿è¡Œè„šæœ¬
bash aria2.sh

è¿è¡Œè„šæœ¬åä¼šå‡ºç°è„šæœ¬æ“ä½œèœå•ï¼Œé€‰æ‹©å¹¶è¾“å…¥ 7 å°±ä¼šæŒ‰ç…§é€‰é¡¹è¿›è¡Œä¿®æ”¹ã€‚
Aria2 ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬ [vx.x.x]
-- Toyo | doub.io/shell-jc4 --
 
 0. å‡çº§è„šæœ¬
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 1. å®‰è£… Aria2
 2. æ›´æ–° Aria2
 3. å¸è½½ Aria2
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 4. å¯åŠ¨ Aria2
 5. åœæ­¢ Aria2
 6. é‡å¯ Aria2
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 7. ä¿®æ”¹ é…ç½®æ–‡ä»¶
 8. æŸ¥çœ‹ é…ç½®ä¿¡æ¯
 9. æŸ¥çœ‹ æ—¥å¿—ä¿¡æ¯
10. é…ç½® è‡ªåŠ¨æ›´æ–° BT-TrackeræœåŠ¡å™¨
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 
å½“å‰çŠ¶æ€: å·²å®‰è£… å¹¶ å·²å¯åŠ¨
 
è¯·è¾“å…¥æ•°å­— [0-10]:

å…¶ä»–æ“ä½œ

å¯åŠ¨ï¼š/etc/init.d/aria2 start
åœæ­¢ï¼š/etc/init.d/aria2 stop
é‡å¯ï¼š/etc/init.d/aria2 restart
æŸ¥çœ‹çŠ¶æ€ï¼š/etc/init.d/aria2 status
é…ç½®æ–‡ä»¶ï¼š/root/.aria2/aria2.conf ï¼ˆé…ç½®æ–‡ä»¶åŒ…å«ä¸­æ–‡æ³¨é‡Šï¼Œä½†æ˜¯ä¸€äº›ç³»ç»Ÿå¯èƒ½ä¸æ”¯æŒæ˜¾ç¤ºä¸­æ–‡ï¼‰
ä»¤ç‰Œå¯†åŒ™ï¼šéšæœºç”Ÿæˆï¼ˆå¯ä»¥è‡ªå·±ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼‰
ä¸‹è½½ç›®å½•ï¼š/data/Download

å®‰è£… AriaNg
AriaNg æ˜¯ä¸€ä¸ªå‰ç«¯(HTML+JSé™æ€)æ§åˆ¶é¢æ¿ï¼Œä¸éœ€è¦å’Œ Aria2 (åç«¯/æœåŠ¡ç«¯)æ”¾åœ¨ä¸€ä¸ªæœåŠ¡å™¨æˆ–è€…è®¾å¤‡ä¸­ï¼Œä½ ç”šè‡³å¯ä»¥åªåœ¨æœåŠ¡å™¨ä¸Šé¢æ­å»º Aria2 åç«¯ï¼Œç„¶åè®¿é—®åˆ«äººå»ºå¥½çš„ AriaNg å‰ç«¯é¢æ¿ï¼Œä¹Ÿå¯ä»¥è¿œç¨‹æ“ä½œ Aria2 åç«¯ï¼
Github æºç åœ°å€ï¼šhttps://github.com/mayswind/AriaNg
ä¸éœ€è¦å’Œ Aria2 (åç«¯/æœåŠ¡ç«¯)æ”¾åœ¨ä¸€ä¸ªæœåŠ¡å™¨æˆ–è€…è®¾å¤‡ä¸­ï¼Œä½ ç”šè‡³å¯ä»¥åªåœ¨æœåŠ¡å™¨ä¸Šé¢æ­å»º Aria2 åç«¯ï¼Œç„¶åè®¿é—®åˆ«äººå»ºå¥½çš„ AriaNg å‰ç«¯é¢æ¿ï¼Œä¹Ÿå¯ä»¥è¿œç¨‹æ“ä½œ Aria2 åç«¯ï¼
ä¸‹è½½ AriaNg
mkdir -p /data/www/ariang
cd /data/www/ariang
wget https://github.com/mayswind/AriaNg-DailyBuild/archive/master.zip &amp;amp;&amp;amp; unzip master.zip
mv AriaNg-DailyBuild-master/* .
rm -rf master.zip AriaNg-DailyBuild-master

é…ç½® Nginx è™šæ‹Ÿä¸»æœº
cd /etc/nginx/conf.d
touch ariang.conf

ç¼–è¾‘é…ç½®
vim ariang.conf

ç¼–è¾‘nginx é…ç½®ï¼Œå°†ä¸‹é¢çš„ä»£ç å¡«å…¥è¿›å»ã€‚
server {
    listen 80;
    server_name &amp;lt;IP_ADDRESS&amp;gt;;

    location / {
        root   /data/www/ariang;
        index  index.html index.htm;
    }
}


è¿™ä¸ªæ—¶å€™ä¹Ÿå¯ä»¥ä½¿ç”¨ nginx -t æµ‹è¯•ä¸€ä¸‹é…ç½®æ–‡ä»¶æ˜¯å¦ä¿®æ”¹æ­£ç¡®

é‡æ–°åŠ è½½ nginx é…ç½®
systemctl reload nginx

è®¿é—® http://IP_HOST å³å¯çœ‹åˆ° ariaNg æ•ˆæœã€‚

é…ç½® Google Drive
æŒ‚è½½ Google Drive åˆ° VPS
å®‰è£… Rclone
yum -y install unzip
curl https://rclone.org/install.sh | sudo bash

é…ç½®
[root@vultr ~]# rclone config
2018/11/25 09:31:54 NOTICE: Config file &amp;quot;/root/.config/rclone/rclone.conf&amp;quot; not found - using defaults
No remotes found - make a new one
n) New remote
s) Set configuration password
q) Quit config
n/s/q&amp;gt; n
name&amp;gt; codesofun
Type of storage to configure.
Enter a string value. Press Enter for the default (&amp;quot;&amp;quot;).
Choose a number from below, or type in your own value
 1 / A stackable unification remote, which can appear to merge the contents of several remotes
   \ &amp;quot;union&amp;quot;
 2 / Alias for a existing remote
   \ &amp;quot;alias&amp;quot;
 3 / Amazon Drive
   \ &amp;quot;amazon cloud drive&amp;quot;
 4 / Amazon S3 Compliant Storage Providers (AWS, Ceph, Dreamhost, IBM COS, Minio)
   \ &amp;quot;s3&amp;quot;
 5 / Backblaze B2
   \ &amp;quot;b2&amp;quot;
 6 / Box
   \ &amp;quot;box&amp;quot;
 7 / Cache a remote
   \ &amp;quot;cache&amp;quot;
 8 / Dropbox
   \ &amp;quot;dropbox&amp;quot;
 9 / Encrypt/Decrypt a remote
   \ &amp;quot;crypt&amp;quot;
10 / FTP Connection
   \ &amp;quot;ftp&amp;quot;
11 / Google Cloud Storage (this is not Google Drive)
   \ &amp;quot;google cloud storage&amp;quot;
12 / Google Drive
   \ &amp;quot;drive&amp;quot;
13 / Hubic
   \ &amp;quot;hubic&amp;quot;
14 / JottaCloud
   \ &amp;quot;jottacloud&amp;quot;
15 / Local Disk
   \ &amp;quot;local&amp;quot;
16 / Mega
   \ &amp;quot;mega&amp;quot;
17 / Microsoft Azure Blob Storage
   \ &amp;quot;azureblob&amp;quot;
18 / Microsoft OneDrive
   \ &amp;quot;onedrive&amp;quot;
19 / OpenDrive
   \ &amp;quot;opendrive&amp;quot;
20 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)
   \ &amp;quot;swift&amp;quot;
21 / Pcloud
   \ &amp;quot;pcloud&amp;quot;
22 / QingCloud Object Storage
   \ &amp;quot;qingstor&amp;quot;
23 / SSH/SFTP Connection
   \ &amp;quot;sftp&amp;quot;
24 / Webdav
   \ &amp;quot;webdav&amp;quot;
25 / Yandex Disk
   \ &amp;quot;yandex&amp;quot;
26 / http Connection
   \ &amp;quot;http&amp;quot;
Storage&amp;gt; 12
** See help for drive backend at: https://rclone.org/drive/ **

Google Application Client Id
Leave blank normally.
Enter a string value. Press Enter for the default (&amp;quot;&amp;quot;).
client_id&amp;gt;
Google Application Client Secret
Leave blank normally.
Enter a string value. Press Enter for the default (&amp;quot;&amp;quot;).
client_secret&amp;gt;
Scope that rclone should use when requesting access from drive.
Enter a string value. Press Enter for the default (&amp;quot;&amp;quot;).
Choose a number from below, or type in your own value
 1 / Full access all files, excluding Application Data Folder.
   \ &amp;quot;drive&amp;quot;
 2 / Read-only access to file metadata and file contents.
   \ &amp;quot;drive.readonly&amp;quot;
   / Access to files created by rclone only.
 3 | These are visible in the drive website.
   | File authorization is revoked when the user deauthorizes the app.
   \ &amp;quot;drive.file&amp;quot;
   / Allows read and write access to the Application Data folder.
 4 | This is not visible in the drive website.
   \ &amp;quot;drive.appfolder&amp;quot;
   / Allows read-only access to file metadata but
 5 | does not allow any access to read or download file content.
   \ &amp;quot;drive.metadata.readonly&amp;quot;
scope&amp;gt; 1
ID of the root folder
Leave blank normally.
Fill in to access &amp;quot;Computers&amp;quot; folders. (see docs).
Enter a string value. Press Enter for the default (&amp;quot;&amp;quot;).
root_folder_id&amp;gt;
Service Account Credentials JSON file path
Leave blank normally.
Needed only if you want use SA instead of interactive login.
Enter a string value. Press Enter for the default (&amp;quot;&amp;quot;).
service_account_file&amp;gt;
Edit advanced config? (y/n)
y) Yes
n) No
y/n&amp;gt; n
Remote config
Use auto config?
 * Say Y if not sure
 * Say N if you are working on a remote or headless machine or Y didn&#39;t work
y) Yes
n) No
y/n&amp;gt; n
If your browser doesn&#39;t open automatically go to the following link: https://accounts.google.com/o/oauth2/auth?access_type=offline&amp;amp;client_id=202264815644.apps.googleusercontent.com&amp;amp;redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&amp;amp;response_type=code&amp;amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&amp;amp;state=0fbdd**********************05a3b00e23
Log in and authorize rclone for access
Enter verification code&amp;gt; 4/owSACseTxM*************c2HtEVX_yEhBcr--JiFTA7-Pfg

Configure this as a team drive?
y) Yes
n) No
y/n&amp;gt; y
Fetching team drive list...
No team drives found in your account--------------------
[codesofun]
type = drive
scope = drive
token = {&amp;quot;access_token&amp;quot;:&amp;quot;ya29.GltfBn_YA8e0lgJNKeMAHZ3b_IeIBXHHrJxMO7wfW0AsY6v_Nso8YczhZafVe8UIIgK6ft1dn6BqP-UWp-W2YXBtcf6zbLuIZgKcPqwnhsVAkx3f7QcO5m0EUvAv&amp;quot;,&amp;quot;token_type&amp;quot;:&amp;quot;Bearer&amp;quot;,&amp;quot;refresh_token&amp;quot;:&amp;quot;1/hFSVnEeJ8CkFmrpdd7IGNx69mhkj8Cpny6JUktv3xcY&amp;quot;,&amp;quot;expiry&amp;quot;:&amp;quot;2018-11-25T10:42:09.400295503Z&amp;quot;}
--------------------
y) Yes this is OK
e) Edit this remote
d) Delete this remote
y/e/d&amp;gt; y
Current remotes:

Name                 Type
====                 ====
codesofun            drive

e) Edit existing remote
n) New remote
d) Delete remote
r) Rename remote
c) Copy remote
s) Set configuration password
q) Quit config
e/n/d/r/c/s/q&amp;gt; q

æ•´åˆ Aria2 + Rclone
è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨ aria2 å»ä¸‹è½½æ–‡ä»¶ï¼Œä¸‹è½½æˆåŠŸåè§¦å‘ä¸€ä¸ªè„šæœ¬è®©å®ƒå°†æ–‡ä»¶ç§»åŠ¨åˆ° Rclone åŒæ­¥çš„æ–‡ä»¶å¤¹å†…ï¼Œè¿™æ ·åœ¨ Google Drive å°±ä¼šè‡ªåŠ¨æœ‰è¿™ä¸ªæ–‡ä»¶å•¦ã€‚
æ–°å»ºä¸€ä¸ªåä¸º rcloneupload.sh çš„è„šæœ¬ã€‚
vim /root/rcloneupload.sh

ç¼–è¾‘è„šæœ¬ï¼Œå°†ä¸‹é¢å†…å®¹å…¨éƒ¨å¡«å…¥è„šæœ¬ä¸­ä¿å­˜ã€‚
#!/bin/bash

filepath=$3	 #å–æ–‡ä»¶åŸå§‹è·¯å¾„ï¼Œå¦‚æœæ˜¯å•æ–‡ä»¶åˆ™ä¸º/Download/a.mp4ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹åˆ™è¯¥å€¼ä¸ºæ–‡ä»¶å¤¹å†…ç¬¬ä¸€ä¸ªæ–‡ä»¶æ¯”å¦‚/Download/a/1.mp4
path=${3%/*}	 #å–æ–‡ä»¶æ ¹è·¯å¾„ï¼Œå¦‚æŠŠ/Download/a/1.mp4å˜æˆ/Download/a
downloadpath=&#39;/data/Download&#39;	#Aria2ä¸‹è½½ç›®å½•
name=&#39;codesofun&#39; #é…ç½®Rcloneæ—¶çš„name
folder=&#39;/share&#39;	 #ç½‘ç›˜é‡Œçš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœæ˜¯æ ¹ç›®å½•ç›´æ¥ç•™ç©º
MinSize=&#39;10k&#39;	 #é™åˆ¶æœ€ä½ä¸Šä¼ å¤§å°ï¼Œé»˜è®¤10kï¼ŒBTä¸‹è½½æ—¶å¯é˜²æ­¢ä¸Šä¼ å…¶ä»–æ— ç”¨æ–‡ä»¶ã€‚ä¼šåˆ é™¤æ–‡ä»¶ï¼Œè°¨æ…è®¾ç½®ã€‚
MaxSize=&#39;15G&#39;	 #é™åˆ¶æœ€é«˜æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤15Gï¼ŒOneDriveä¸Šä¼ é™åˆ¶ã€‚

if [ $2 -eq 0 ]; then exit 0; fi

while true; do
if [ &amp;quot;$path&amp;quot; = &amp;quot;$downloadpath&amp;quot; ] &amp;amp;&amp;amp; [ $2 -eq 1 ]	#å¦‚æœä¸‹è½½çš„æ˜¯å•ä¸ªæ–‡ä»¶
    then
    rclone move -v &amp;quot;$filepath&amp;quot; ${name}:${folder} --min-size $MinSize --max-size $MaxSize
    rm -vf &amp;quot;$filepath&amp;quot;.aria2	#åˆ é™¤æ®‹ç•™çš„.aria.2æ–‡ä»¶
    exit 0
elif [ &amp;quot;$path&amp;quot; != &amp;quot;$downloadpath&amp;quot; ]	#å¦‚æœä¸‹è½½çš„æ˜¯æ–‡ä»¶å¤¹
    then
    while [[ &amp;quot;`ls -A &amp;quot;$path/&amp;quot;`&amp;quot; != &amp;quot;&amp;quot; ]]; do
    rclone move -v &amp;quot;$path&amp;quot; ${name}:/${folder}/&amp;quot;${path##*/}&amp;quot; --min-size $MinSize --max-size $MaxSize --delete-empty-src-dirs
    rclone delete -v &amp;quot;$path&amp;quot; --max-size $MinSize	#åˆ é™¤å¤šä½™çš„æ–‡ä»¶
    rclone rmdirs -v &amp;quot;$downloadpath&amp;quot; --leave-root	#åˆ é™¤ç©ºç›®å½•ï¼Œ--delete-empty-src-dirs å‚æ•°å·²å®ç°ï¼ŒåŠ ä¸Šæ— æ‰€è°“ã€‚
    done
    rm -vf &amp;quot;$path&amp;quot;.aria2	#åˆ é™¤æ®‹ç•™çš„.aria2æ–‡ä»¶
    exit 0
fi
done

éœ€è¦ä¿®æ”¹å‡ ä¸ªåœ°æ–¹ï¼š

downloadpathï¼šå¡«å†™ aria2 çš„ä¸‹è½½ç›®å½•
nameï¼šå¡«å†™ rclone é…ç½®çš„åç§°
folderï¼šå¡«å†™è°·æ­Œäº‘ç›˜çš„æ–‡ä»¶å¤¹åç§°ï¼Œæ ¹ç›®å½•å¡« / å³å¯

ä¿å­˜åç»™äºˆæ‰§è¡Œæƒé™
chmod +x /root/rcloneupload.sh

ç„¶åå†åˆ° Aria2 é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šä¸€è¡Œ on-download-complete=/root/rcloneupload.sh å³å¯ï¼Œåé¢ä¸ºè„šæœ¬çš„è·¯å¾„ã€‚é‡å¯ Aria2 ç”Ÿæ•ˆã€‚
vim /root/.aria2/aria2.conf

on-download-complete=/root/rcloneupload.sh
/etc/init.d/aria2 restart

è¯·å¼€å§‹ä½ çš„è¡¨æ¼”

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://chwl66.github.io/post/OVI5xWH9j">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://chwl66.github.io/post/sRQUu33vw">
                        GoIndexéƒ¨ç½²æ•™ç¨‹ï¼Œç”¨Google Driveæ¥åšç›®å½•ç´¢å¼•ç½‘ç›˜
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-11-22</time>
                    
                </div>
                <div class="post-article">
                    
                        <a href="https://chwl66.github.io/post/sRQUu33vw" class="post-feature-image" style="background-image:url(https://shop.io.mi-img.com/app/shop/img?id=shop_09a468f93e5bf97d2fd771d2999c7c9b.png) ">
                        </a>
                        
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            æ„Ÿè°¢å¤§ä½¬@donwaåˆæ›´æ–°äº†ä¸€ä¸ªé’ˆå¯¹Google Driveçš„æ–‡ä»¶ç›®å½•ä»£ç ï¼è¿™é‡Œæ›´æ–°ä¸€ç¯‡æ–‡ç« ä»‹ç»ä¸€ä¸‹ï¼ï¼
ç”±äºåšä¸»æœ€è¿‘åœ¨ç–¯ç‹‚åŠ ç­ï¼Œæ—¶é—´å¤ªç´§å¼ äº†ï¼Œæ–‡ç« å†…å®¹å‡æ¥çƒ­æƒ…çš„ç½‘å‹ï¼æœ€åçš„ã€å‚è€ƒæ–‡çŒ®ã€‘ä¸€ä¸€åˆ—å‡ºï¼
ä¹‹å‰æœ¬åšå®¢æ›´æ–°è¿‡å¤§ä½¬çš„å¦ä¸€ä¸ªå¼€æºä»£ç ï¼OneIndexéƒ¨ç½²æ•™ç¨‹ï¼Œåˆ©ç”¨OneDriveæ‰“é€ ä¸“å±åˆ†äº«å‹ç½‘ç›˜
åŠŸèƒ½ä»‹ç»
éƒ¨ç½²åœ¨ CloudFlare Workersçš„å°ç¨‹åºã€‚
å¯ä»¥å°† Google Drive æ–‡ä»¶ä»¥ç›®å½•å½¢å¼åˆ—å‡ºï¼Œå¹¶ç›´è¿ä¸‹è½½ã€‚
æµé‡èµ° CloudFlare ï¼Œç½‘é€Ÿç”± CloudFlare å†³å®šã€‚
å¼€æºåœ°å€
https://github.com/donwa/goindex
æ¼”ç¤ºåœ°å€
https://index.gd.workers.dev/
åŠŸèƒ½ç‰¹ç‚¹
1ã€å…è´¹ã€‚
2ã€ç›´é“¾ã€‚
3ã€å…ç•ªã€‚
ä½¿ç”¨é™åˆ¶
wokersä¸€å¤©10ä¸‡è¯·æ±‚é™åˆ¶
google drive ä¸‹è½½10T/24hï¼ˆå¤§ä½¬è¯´çš„ï¼‰
google api è°ƒç”¨é™åˆ¶
éƒ¨ç½²æ­¥éª¤
1ï¼‰è®¿é—® https://install.gd.workers.dev/ ç‚¹å‡» ã€1.è·å–è®¤è¯ç ã€‘ç™»é™†Googleå¸å·ï¼Œä¼šæœ‰code(ç”»çº¿éƒ¨åˆ†ï¼‰ã€‚å°†ä¸Šé¢çš„CODEå¤åˆ¶åˆ° Authè®¤è¯ç éƒ¨åˆ†ã€‚ç›®å½•IDå¯ä»¥ç•™ç©ºï¼

2ï¼‰ç‚¹ã€2.ç”Ÿæˆä»£ç ã€‘ï¼Œå¤åˆ¶ç”Ÿæˆçš„ä»£ç ï¼Œæ‰“å¼€ https://dash.cloudflare.com/ ç™»é™†å¸å·ï¼Œé€‰ä¸ªåŸŸåï¼Œç‚¹å‡» Workersï¼Œå¦‚å›¾

3ï¼‰ç‚¹å‡» new Workers dashboard ï¼Œå¦‚å›¾ï¼Œéœ€è¦èµ·ä¸ªåå­—ï¼Œæˆ‘å·²ç»èµ·è¿‡äº†ï¼Œå°±æ²¡æœ‰æˆªå›¾äº†ï¼Œç±»ä¼¼ä¸  qwe.workers.devçš„åå­—ï¼Œåªèƒ½ä¿®æ”¹å‰ç¼€ï¼Œåç¼€workers.dev å›ºå®šçš„ã€‚

4ï¼‰ç‚¹å‡»Create a Workersï¼Œå¦‚å›¾ï¼Œ

5ï¼‰åœ¨Scripté‡Œå¤åˆ¶åˆšæ‰çš„ä»£ç codeï¼Œå³ä¸‹è§’Runå¯ä»¥åœ¨å³è¾¹çœ‹åˆ°æµè§ˆçŠ¶æ€ï¼Œå³è¾¹ä¸Šæ–¹æœ‰åœ°å€ï¼Œå·¦è¾¹ä¸Šæ–¹å¯ä»¥ä¿®æ”¹åœ°å€ï¼Œä¾‹å¦‚ä¿®æ”¹ä¸º121ï¼ŒSave and Deployä¿å­˜
121.qwe.workers.dev å°±æ˜¯ä½ çš„åœ°å€äº†ã€‚
å…¶ä»–å†…å®¹
å¦‚ä½•è‡ªå®šä¹‰åŸŸå
1ï¼‰å…ˆè®©éœ€è¦ç»‘å®šçš„åŸŸåé€šè¿‡cfï¼ŒæŒ‡å‘ipéšæ„ã€‚

2ï¼‰æ·»åŠ Route


å…³äºç›®å½•ID
æ‰“å¼€å›¢é˜Ÿç›˜(æˆ–æ–‡ä»¶å¤¹æˆ–åˆ«äººå…±äº«çš„æ–‡ä»¶å¤¹)ï¼Œçœ‹åœ°å€æ ã€‚
https://drive.google.com/drive/folders/{è¿™åé¢ä¸€å †ä»£ç å°±æ˜¯id}
ç•™ç©ºæ˜¯æ ¹ç›®å½•ã€‚

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://chwl66.github.io/post/sRQUu33vw">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://chwl66.github.io/post/28IUd1HzY">
                        PyOneä¸€é”®å®‰è£…è„šæœ¬ for CentOS 7/Debian 8+/Ubuntu 16+
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-11-22</time>
                    
                </div>
                <div class="post-article">
                    
                        <a href="https://chwl66.github.io/post/28IUd1HzY" class="post-feature-image" style="background-image:url(https://fbi.gs/2019/10/21/5dad4fcc9d2c7.png) ">
                        </a>
                        
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            è¯´æ˜ï¼šPyOneæœ€è¿‘å‡­ç€ç¦»çº¿ä¸‹è½½(å®Œæˆå¹¶è‡ªåŠ¨ä¸Šä¼ è‡³Onedrive)å’Œç»‘å®šå¤šç½‘ç›˜çš„åŠŸèƒ½è¢«è¶Šæ¥è¶Šå¤šçš„äººä½¿ç”¨ï¼Œå¦‚æœä½ è¿˜ä¸çŸ¥é“PyOneæ˜¯ä½•ç‰©çš„å¯ä»¥æŸ¥çœ‹è¯¥æ•™ç¨‹â†’ç‚¹å‡»æŸ¥çœ‹ã€‚ä½œè€…æ›´æ–°ä¹Ÿå‹¤å¥‹ï¼Œæ‰€ä»¥å¾—æ”¯æŒä¸€ä¸‹ï¼Œä¹‹å‰åšä¸»å‘è¿‡åŸºäºå®å¡”çš„æ‰‹åŠ¨å®‰è£…æ•™ç¨‹å’ŒDockerå®‰è£…æ•™ç¨‹ï¼ŒæŸ¥çœ‹ï¼šæ‰‹åŠ¨å®‰è£…ã€Dockerå®‰è£…ã€‚ä¸è¿‡ç”±äºå®å¡”çš„Mongodbå¾ˆå®¹æ˜“å‡ºé”™ï¼Œæœ‰äº›å°ç™½ä¹Ÿä¸ä¼šè§£å†³ï¼Œè€ŒDockerä¹Ÿä¸æ”¯æŒOpenVZï¼Œæ‰€ä»¥åšä¸»å†™äº†ä¸ªä¸€é”®è„šæœ¬ï¼Œè¿™é‡Œåˆ†äº«ä¸‹ã€‚
è„šæœ¬è¯´æ˜
#è„šæœ¬ä¼šä¸€é”®å®‰è£…PyOneæ‰€éœ€è¦çš„Mongodbã€Redisã€Aria2ç­‰ç¯å¢ƒï¼ŒåŸŸåä½¿ç”¨Caddyåä»£ï¼Œè‡ªåŠ¨é…ç½®SSLè¯ä¹¦ã€‚

#æœ¬è„šæœ¬ä½¿ç”¨çš„Aria2ä¸ºæŸå¤§ä½¬ç¼–è¯‘çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œå…¶ç‰¹ç‚¹å¯ä»¥å°†ä¸‹è½½é€Ÿåº¦æœ€å¤§åŒ–ä¼˜åŒ–ï¼Œåšä¸»å·²é…ç½®å®Œæ¯•ï¼Œå¦‚æœåŠ¡å™¨æ€§èƒ½ä¸è¶³ï¼Œå¯å°†çº¿ç¨‹è‡ªè¡Œè°ƒæ•´ã€‚
æ–¹æ³•ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶/root/.aria2/aria2.confï¼Œçº¿ç¨‹å‚æ•°split=64ï¼Œè¯·è‡ªè¡Œè°ƒæ•´ã€‚

#Aria2å·²æ·»åŠ äº†BT-TrackersæœåŠ¡å™¨ï¼Œå¹¶å®šæ—¶è‡ªåŠ¨æ›´æ–°æœåŠ¡å™¨åœ°å€ã€‚

#è„šæœ¬ä½¿ç”¨systemctlæ›¿æ¢äº†ç¨‹åºæ‰€ä½¿ç”¨çš„supervisordè¿›ç¨‹å®ˆæŠ¤ï¼Œæ‰€ä»¥ç¨‹åºçš„é‡å¯ç­‰å‘½ä»¤ä¼šå’Œå®˜æ–¹æ–‡æ¡£ä¸Šçš„ä¸ä¸€æ ·ï¼Œè¯¦ç»†çš„ä½¿ç”¨å‘½ä»¤å¯ä»¥çœ‹æ–‡ç« åé¢ã€‚

#é€‰æ‹©åŸŸåè®¿é—®çš„ï¼Œéœ€è¦æå‰è®©è§£æç”Ÿæ•ˆï¼Œä¸ç„¶è„šæœ¬ä¼šè‡ªåŠ¨æ–­å¼€ï¼Œå› ä¸ºåé¢éœ€è¦ç­¾å‘SSLè¯ä¹¦ï¼Œipå¿…é¡»ä¸ºæœåŠ¡å™¨ipã€‚

æ›´æ–°
ã€2019.9.28ã€‘
æ–°å¢Debian 10ï¼Œå‡çº§MongoDBç‰ˆæœ¬åˆ°4.0ï¼Œæœ‰é—®é¢˜å¯ä»¥ç•™è¨€ã€‚
ã€2019.6.27ã€‘
ä¿®å¤éƒ¨åˆ†CentOS 7å®‰è£…å‡ºé”™çš„é—®é¢˜ï¼Œå¹¶æ–°å¢Ubuntuç³»ç»Ÿï¼Œå·²åœ¨Vultrçš„Ubuntu 16.04ã€18.04ã€18.10ã€19.04ä¸Šæµ‹è¯•é€šè¿‡
ã€2019.2.23ã€‘
é‰´äºæœ‰äººéœ€è¦3.0ç‰ˆæœ¬ï¼Œç°å·²å¢åŠ å®‰è£…3.0ç‰ˆæœ¬é€‰é¡¹ï¼Œå¤šä¸ªé€‰æ‹©ï¼Œå¹¶ä½¿ç”¨çš„3.0æœ€åä¸€ä¸ªç‰ˆæœ¬ã€‚
ã€2019.2.16ã€‘
ä¿®æ”¹è„šæœ¬éƒ¨åˆ†å®‰è£…æ­¥éª¤ï¼Œä½¿å…¶æ”¯æŒPyOne4.0
ã€2019.1.31ã€‘
ä¿®å¤éƒ¨åˆ†ç³»ç»Ÿå®‰è£…å¯åŠ¨pyoneå¤±è´¥çš„é—®é¢˜
ã€2018.11.30ã€‘
ä¿®å¤PyOneåˆ·æ–°ä¸å‡ºæ–‡ä»¶å¤¹/æ–‡ä»¶çš„é—®é¢˜ã€‚

å®‰è£…
ç³»ç»Ÿè¦æ±‚ï¼šCentOS 7ã€Debian 8+ã€Ubuntu 16+ï¼Œå»ºè®®Debian 9ï¼Œä¸”ä¸ºåˆšå®‰è£…å¥½çš„ç³»ç»Ÿï¼Œå°½é‡ä¸è¦ç”¨ç²¾ç®€ç‰ˆç³»ç»Ÿã€‚
ä½¿ç”¨å‘½ä»¤ï¼š
wget -N --no-check-certificate https://www.moerats.com/usr/shell/PyOne/PyOne.sh
bash PyOne.sh

æ ¹æ®éœ€æ±‚é€‰æ‹©æ˜¯å¦ä½¿ç”¨åŸŸåè®¿é—®ï¼Œç„¶åè¾“å…¥åŸŸåå’ŒAria2å¯†åŒ™å³å¯ã€‚

å®‰è£…å®Œæˆåï¼Œå¦‚æœæ‰“ä¸å¼€ç½‘ç«™çš„ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ä¸€èµ·æŸ¥çœ‹ä¸‹å„ç¨‹åºçŠ¶æ€ã€‚
#ä½¿ç”¨åŸŸåè®¿é—®çš„
systemctl status aria2 mongod redis-server pyone caddy
#ä½¿ç”¨IPè®¿é—®çš„
systemctl status aria2 mongod redis-server pyone

å¦‚æœæœ‰æ˜¾ç¤ºActive:inactiveçš„ï¼Œå¯ä»¥ç•™è¨€è¯´ä¸‹å…·ä½“ç¨‹åºå’Œç³»ç»Ÿã€‚åä¹‹å¦‚æœéƒ½ä¸ºrunningï¼Œå¯ä»¥æ£€æŸ¥ä¸‹é˜²ç«å¢™ç«¯å£ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ï¼Œè°·æ­Œäº‘ç­‰ï¼Œè¿˜éœ€è¦åœ¨æœåŠ¡å™¨ç®¡ç†é¢æ¿ä¸Šå¼€æ”¾34567ç«¯å£æ‰è¡Œã€‚
ç›¸å…³å‘½ä»¤
#ä»¥ä¸‹ç¨‹åºå‡å·²é…ç½®å¼€æœºè‡ªå¯ï¼Œæ‰€ä»¥å°±ä¸è¯´å¼€æœºè‡ªå¯å‘½ä»¤äº†ã€‚

#Redisä½¿ç”¨å‘½ä»¤
å¯åŠ¨ï¼šsystemctl start redis-server
é‡å¯ï¼šsystemctl restart redis-server
åœæ­¢ï¼šsystemctl stop redis-server
çŠ¶æ€ï¼šsystemctl status redis-server

#Mongodbä½¿ç”¨å‘½ä»¤
å¯åŠ¨ï¼šsystemctl start mongod
é‡å¯ï¼šsystemctl restart mongod
åœæ­¢ï¼šsystemctl stop mongod
çŠ¶æ€ï¼šsystemctl status mongod

#Aria2ä½¿ç”¨å‘½ä»¤
å¯åŠ¨ï¼šsystemctl start aria2
é‡å¯ï¼šsystemctl restart aria2
åœæ­¢ï¼šsystemctl stop aria2
çŠ¶æ€ï¼šsystemctl status aria2

#Caddyä½¿ç”¨å‘½ä»¤(ä½¿ç”¨åŸŸåçš„æ‰ä¼šå®‰è£…Caddy)
å¯åŠ¨ï¼šsystemctl start caddy
é‡å¯ï¼šsystemctl restart caddy
åœæ­¢ï¼šsystemctl stop caddy
çŠ¶æ€ï¼šsystemctl status caddy

#PyOneä½¿ç”¨å‘½ä»¤
å¯åŠ¨ï¼šsystemctl start pyone
é‡å¯ï¼šsystemctl restart pyone
åœæ­¢ï¼šsystemctl stop pyone
çŠ¶æ€ï¼šsystemctl status pyone

ç›¸å…³ç›®å½•
PyOneç¨‹åºç›®å½•ï¼š/root/PyOne
Caddyé…ç½®æ–‡ä»¶ç›®å½•ï¼š/root/.caddy
Aria2é…ç½®æ–‡ä»¶ç›®å½•ï¼š/root/.aria2

ç›¸å…³è¯´æ˜
#å…³äºæ“ä½œè¯´æ˜
ç”±äºæ›´æ¢äº†åŸç¨‹åºè¿›ç¨‹å®ˆæŠ¤ï¼Œæ‰€ä»¥ç½‘ç«™å³ä¸Šè§’çš„é‡å¯ç½‘ç«™æŒ‰é’®å·²å¤±æ•ˆï¼Œè¯·åœ¨SSHå®¢æˆ·ç«¯ä½¿ç”¨systemctl restart pyoneå‘½ä»¤é‡å¯ç¨‹åºã€‚

#å…³äºç¦»çº¿ä¸‹è½½
Aria2é…ç½®æ–‡ä»¶çš„ä¸‹è½½è·¯å¾„ä¸º/root/Downloadï¼Œä½†è¯¥ç¨‹åºè‡ªå¸¦çš„ç¦»çº¿ä¸‹è½½ä¸è°ƒç”¨é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨æœ¬ç¨‹åºç¦»çº¿ä¸‹è½½çš„ç›®å½•ä¸º/root/PyOne/uploadã€‚

ç”±äºæœ¬ç¨‹åºç¦»çº¿ä¸‹è½½ä¸è°ƒç”¨é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥Aria2å¤šçº¿ç¨‹å¯èƒ½ä¼šå‘æŒ¥ä¸å‡ºæ¥ï¼ŒBTæœåŠ¡å™¨ä¹Ÿæ— æ•ˆï¼Œä¸è¿‡ä¼šç©çš„ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹æ ¹ç›®å½•çš„aria2.pyæ–‡ä»¶æŸäº›å‚æ•°è¾¾åˆ°ç›®çš„ï¼Œæˆ–è€…ç›´æ¥ç ”ç©¶è¯¥æ•™ç¨‹ï¼šhttps://www.moerats.com/archives/697/ï¼Œä½¿ç”¨Aria2é¢æ¿æ¥ç¦»çº¿ä¸‹è½½æ›´å¥½ï¼Œæ¯•ç«Ÿåè€…ç”¨çš„è„šæœ¬æ¯”è‡ªå¸¦ç¦»çº¿ä¸‹è½½æ›´ç¨³å®šã€‚

#åˆ·æ–°ç¼“å­˜é—®é¢˜
å¦‚æœä½ åœ¨åå°æ‰§è¡Œç¼“å­˜åˆ·æ–°æ“ä½œï¼Œå¯èƒ½çŸ­æ—¶é—´ä¸ä¼šç”Ÿæ•ˆï¼Œå»ºè®®ç›´æ¥åœ¨SSHå®¢æˆ·ç«¯ä½¿ç”¨python /root/PyOne/function.py UpdateFileå‘½ä»¤åˆ·æ–°

æœ€åæ›´å¤šçš„ä½¿ç”¨æ–¹æ³•(åŒ…æ‹¬ç¨‹åºæ›´æ–°)å¯ä»¥æŸ¥çœ‹è¯¥æ•™ç¨‹â†’ç‚¹å‡»æŸ¥çœ‹ï¼Œé™¤äº†PyOneå¯åŠ¨å‘½ä»¤ä¸ä¸€æ ·ä»¥å¤–ï¼Œå…¶å®ƒéƒ½ä¸€æ ·ï¼ŒåŒ…æ‹¬ä¸Šä¼ ç­‰å‘½ä»¤ã€‚

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://chwl66.github.io/post/28IUd1HzY">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://chwl66.github.io/post/pLeXJDL_N">
                        åˆ©ç”¨CloudFlare Worker å…è´¹éƒ¨ç½² JSProxy æœåŠ¡
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-11-22</time>
                    
                </div>
                <div class="post-article">
                    
                        <a href="https://chwl66.github.io/post/pLeXJDL_N" class="post-feature-image" style="background-image:url(https://ae04.alicdn.com/kf/HTB1d3AHaAT2gK0jSZPc763KkpXaT.png) ">
                        </a>
                        
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            JSProxy ä¸€ä¸ªåŸºäºæµè§ˆå™¨ç«¯ JS å®ç°çš„åœ¨çº¿ä»£ç†ï¼Œè¿™é‡Œä¸å¤šä»‹ç»ï¼
æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸€ä¸‹åˆ©ç”¨CloudFlare Worker æ¥æ­å»ºä¸€ä¸ªJSProxyæœåŠ¡ã€‚
CloudFlare Worker æ˜¯ CloudFlare çš„è¾¹ç¼˜è®¡ç®—æœåŠ¡ã€‚å¼€å‘è€…å¯é€šè¿‡ JavaScript å¯¹ CDN è¿›è¡Œç¼–ç¨‹ï¼Œä»è€Œèƒ½çµæ´»å¤„ç† HTTP è¯·æ±‚ã€‚è¿™ä½¿å¾—å¾ˆå¤šä»»åŠ¡å¯åœ¨ CDN ä¸Šå®Œæˆï¼Œæ— éœ€è‡ªå·±çš„æœåŠ¡å™¨å‚ä¸ã€‚
CFWå…è´¹æœåŠ¡ï¼Œæ”¯æŒæ¯å¤©10 ä¸‡æ¬¡å…è´¹è¯·æ±‚ï¼åŸºæœ¬ä¹Ÿå¤Ÿç”¨äº†ï¼
é¡¹ç›®ä»‹ç»
é¡¹ç›®åœ°å€ï¼šhttps://github.com/EtherDream/jsproxy
å‡†å¤‡å·¥ä½œ
Cloudflare è´¦å·ä¸€ä¸ª
ä½¿ç”¨æ•™ç¨‹
1ï¼‰æ‰“å¼€ https://workers.cloudflare.comï¼Œç™»é™†ä¸Šä½ çš„ Cloudflare è´¦å·æ¿€æ´» Workers æœåŠ¡

ç„¶ååˆ›å»ºä¸€ä¸ª Workersã€Create a Workerã€‘

2ï¼‰ä¿®æ”¹ä¸€ä¸‹å­åŸŸåï¼Œåˆ›å»ºå‡ºæ¥çš„åŸŸåæ ¼å¼ è‡ªå®šä¹‰çš„å†…å®¹.Cloudflareç”¨æˆ·å.workers.dev

3ï¼‰å¤åˆ¶ https://raw.githubusercontent.com/EtherDream/jsproxy/master/cf-worker/index.js çš„å†…å®¹åˆ°å·¦ä¾§ä»£ç ï¼ˆScriptï¼‰åŒºåŸŸ
æ–‡ç« æœ€ä¸‹æ–¹æœ‰ä»£ç å¤‡ä»½ï¼ï¼

4ï¼‰å…ˆç‚¹å‡»ã€Runã€‘å³ä¾§çœ‹æ‰§è¡Œæ•ˆæœï¼Œå†ç‚¹å‡» ã€Save and deployã€‘ éƒ¨ç½²ä»£ç 
5ï¼‰å±Šæ—¶ä½ å¯ä»¥è®¿é—®ä½ çš„ç«™ç‚¹https://xxx.å­åŸŸå.workers.devæŸ¥çœ‹æ•ˆæœ
è¿›å…¥ç«™ç‚¹åå°†çº¿è·¯é€‰æ‹©åˆ‡æ¢ä¸ºå½“å‰ç«™ç‚¹å³å¯ä½¿ç”¨
ç‰¹åˆ«æç¤ºï¼šæµè§ˆç½‘ç«™çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šæç¤ºåŠ è½½ä¸å®‰å…¨è„šæœ¬ï¼Œç‚¹å‡»å…è®¸å³å¯ï¼
ä»£ç å¤‡ä»½
&#39;use strict&#39;

/**
 * static files (404.html, sw.js, conf.js)
 */
const ASSET_URL = &#39;https://etherdream.github.io/jsproxy&#39;

const JS_VER = 10
const MAX_RETRY = 1

/** @type {RequestInit} */
const PREFLIGHT_INIT = {
  status: 204,
  headers: new Headers({
    &#39;access-control-allow-origin&#39;: &#39;*&#39;,
    &#39;access-control-allow-methods&#39;: &#39;GET,POST,PUT,PATCH,TRACE,DELETE,HEAD,OPTIONS&#39;,
    &#39;access-control-max-age&#39;: &#39;1728000&#39;,
  }),
}

/**
 * @param {any} body
 * @param {number} status
 * @param {Object&amp;lt;string, string&amp;gt;} headers
 */
function makeRes(body, status = 200, headers = {}) {
  headers[&#39;--ver&#39;] = JS_VER
  headers[&#39;access-control-allow-origin&#39;] = &#39;*&#39;
  return new Response(body, {status, headers})
}


/**
 * @param {string} urlStr 
 */
function newUrl(urlStr) {
  try {
    return new URL(urlStr)
  } catch (err) {
    return null
  }
}


addEventListener(&#39;fetch&#39;, e =&amp;gt; {
  const ret = fetchHandler(e)
    .catch(err =&amp;gt; makeRes(&#39;cfworker error:\n&#39; + err.stack, 502))
  e.respondWith(ret)
})


/**
 * @param {FetchEvent} e 
 */
async function fetchHandler(e) {
  const req = e.request
  const urlStr = req.url
  const urlObj = new URL(urlStr)
  const path = urlObj.href.substr(urlObj.origin.length)

  if (urlObj.protocol === &#39;http:&#39;) {
    urlObj.protocol = &#39;https:&#39;
    return makeRes(&#39;&#39;, 301, {
      &#39;strict-transport-security&#39;: &#39;max-age=99999999; includeSubDomains; preload&#39;,
      &#39;location&#39;: urlObj.href,
    })
  }

  if (path.startsWith(&#39;/http/&#39;)) {
    return httpHandler(req, path.substr(6))
  }

  switch (path) {
  case &#39;/http&#39;:
    return makeRes(&#39;è¯·æ›´æ–° cfworker åˆ°æœ€æ–°ç‰ˆæœ¬!&#39;)
  case &#39;/ws&#39;:
    return makeRes(&#39;not support&#39;, 400)
  case &#39;/works&#39;:
    return makeRes(&#39;it works&#39;)
  default:
    // static files
    return fetch(ASSET_URL + path)
  }
}


/**
 * @param {Request} req
 * @param {string} pathname
 */
function httpHandler(req, pathname) {
  const reqHdrRaw = req.headers
  if (reqHdrRaw.has(&#39;x-jsproxy&#39;)) {
    return Response.error()
  }

  // preflight
  if (req.method === &#39;OPTIONS&#39; &amp;amp;&amp;amp;
      reqHdrRaw.has(&#39;access-control-request-headers&#39;)
  ) {
    return new Response(null, PREFLIGHT_INIT)
  }

  let acehOld = false
  let rawSvr = &#39;&#39;
  let rawLen = &#39;&#39;
  let rawEtag = &#39;&#39;

  const reqHdrNew = new Headers(reqHdrRaw)
  reqHdrNew.set(&#39;x-jsproxy&#39;, &#39;1&#39;)

  // æ­¤å¤„é€»è¾‘å’Œ http-dec-req-hdr.lua å¤§è‡´ç›¸åŒ
  // https://github.com/EtherDream/jsproxy/blob/master/lua/http-dec-req-hdr.lua
  const refer = reqHdrNew.get(&#39;referer&#39;)
  const query = refer.substr(refer.indexOf(&#39;?&#39;) + 1)
  if (!query) {
    return makeRes(&#39;missing params&#39;, 403)
  }
  const param = new URLSearchParams(query)

  for (const [k, v] of Object.entries(param)) {
    if (k.substr(0, 2) === &#39;--&#39;) {
      // ç³»ç»Ÿä¿¡æ¯
      switch (k.substr(2)) {
      case &#39;aceh&#39;:
        acehOld = true
        break
      case &#39;raw-info&#39;:
        [rawSvr, rawLen, rawEtag] = v.split(&#39;|&#39;)
        break
      }
    } else {
      // è¿˜åŸ HTTP è¯·æ±‚å¤´
      if (v) {
        reqHdrNew.set(k, v)
      } else {
        reqHdrNew.delete(k)
      }
    }
  }
  if (!param.has(&#39;referer&#39;)) {
    reqHdrNew.delete(&#39;referer&#39;)
  }

  // cfworker ä¼šæŠŠè·¯å¾„ä¸­çš„ `//` åˆå¹¶æˆ `/`
  const urlStr = pathname.replace(/^(https?):\/+/, &#39;$1://&#39;)
  const urlObj = newUrl(urlStr)
  if (!urlObj) {
    return makeRes(&#39;invalid proxy url: &#39; + urlStr, 403)
  }

  /** @type {RequestInit} */
  const reqInit = {
    method: req.method,
    headers: reqHdrNew,
    redirect: &#39;manual&#39;,
  }
  if (req.method === &#39;POST&#39;) {
    reqInit.body = req.body
  }
  return proxy(urlObj, reqInit, acehOld, rawLen, 0)
}


/**
 * 
 * @param {URL} urlObj 
 * @param {RequestInit} reqInit 
 * @param {number} retryTimes 
 */
async function proxy(urlObj, reqInit, acehOld, rawLen, retryTimes) {
  const res = await fetch(urlObj.href, reqInit)
  const resHdrOld = res.headers
  const resHdrNew = new Headers(resHdrOld)

  let expose = &#39;*&#39;
  
  for (const [k, v] of resHdrOld.entries()) {
    if (k === &#39;access-control-allow-origin&#39; ||
        k === &#39;access-control-expose-headers&#39; ||
        k === &#39;location&#39; ||
        k === &#39;set-cookie&#39;
    ) {
      const x = &#39;--&#39; + k
      resHdrNew.set(x, v)
      if (acehOld) {
        expose = expose + &#39;,&#39; + x
      }
      resHdrNew.delete(k)
    }
    else if (acehOld &amp;amp;&amp;amp;
      k !== &#39;cache-control&#39; &amp;amp;&amp;amp;
      k !== &#39;content-language&#39; &amp;amp;&amp;amp;
      k !== &#39;content-type&#39; &amp;amp;&amp;amp;
      k !== &#39;expires&#39; &amp;amp;&amp;amp;
      k !== &#39;last-modified&#39; &amp;amp;&amp;amp;
      k !== &#39;pragma&#39;
    ) {
      expose = expose + &#39;,&#39; + k
    }
  }

  if (acehOld) {
    expose = expose + &#39;,--s&#39;
    resHdrNew.set(&#39;--t&#39;, &#39;1&#39;)
  }

  // verify
  if (rawLen) {
    const newLen = resHdrOld.get(&#39;content-length&#39;) || &#39;&#39;
    const badLen = (rawLen !== newLen)

    if (badLen) {
      if (retryTimes &amp;lt; MAX_RETRY) {
        urlObj = await parseYtVideoRedir(urlObj, newLen, res)
        if (urlObj) {
          return proxy(urlObj, reqInit, acehOld, rawLen, retryTimes + 1)
        }
      }
      return makeRes(res.body, 400, {
        &#39;--error&#39;: `bad len: ${newLen}, except: ${rawLen}`,
        &#39;access-control-expose-headers&#39;: &#39;--error&#39;,
      })
    }

    if (retryTimes &amp;gt; 1) {
      resHdrNew.set(&#39;--retry&#39;, retryTimes)
    }
  }

  let status = res.status

  resHdrNew.set(&#39;access-control-expose-headers&#39;, expose)
  resHdrNew.set(&#39;access-control-allow-origin&#39;, &#39;*&#39;)
  resHdrNew.set(&#39;--s&#39;, status)
  resHdrNew.set(&#39;--ver&#39;, JS_VER)

  resHdrNew.delete(&#39;content-security-policy&#39;)
  resHdrNew.delete(&#39;content-security-policy-report-only&#39;)
  resHdrNew.delete(&#39;clear-site-data&#39;)

  if (status === 301 ||
      status === 302 ||
      status === 303 ||
      status === 307 ||
      status === 308
  ) {
    status = status + 10
  }

  return new Response(res.body, {
    status,
    headers: resHdrNew,
  })
}


/**
 * @param {URL} urlObj 
 */
function isYtUrl(urlObj) {
  return (
    urlObj.host.endsWith(&#39;.googlevideo.com&#39;) &amp;amp;&amp;amp;
    urlObj.pathname.startsWith(&#39;/videoplayback&#39;)
  )
}

/**
 * @param {URL} urlObj 
 * @param {number} newLen 
 * @param {Response} res 
 */
async function parseYtVideoRedir(urlObj, newLen, res) {
  if (newLen &amp;gt; 2000) {
    return null
  }
  if (!isYtUrl(urlObj)) {
    return null
  }
  try {
    const data = await res.text()
    urlObj = new URL(data)
  } catch (err) {
    return null
  }
  if (!isYtUrl(urlObj)) {
    return null
  }
  return urlObj
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://chwl66.github.io/post/pLeXJDL_N">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://chwl66.github.io/post/GLrSQjpqd">
                        æ³¨å†Œæ¿€æ´»Navicatå…¨ç³»äº§å“çš„å¼€æºä»£ç åˆ†äº«
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-11-22</time>
                    
                </div>
                <div class="post-article">
                    
                        <a href="https://chwl66.github.io/post/GLrSQjpqd" class="post-feature-image" style="background-image:url(https://fbi.gs/2019/10/18/5da949518a576.png) ">
                        </a>
                        
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            å‰ä¸€æ®µå„¿æ—¶é—´æˆ‘æ°´äº†ä¸€ç¯‡æ–‡ç« ä»‹ç»äº†PJç‰ˆæœ¬çš„Navicatï¼Œå½“æ—¶æœ‰å¤§ä½¬PMæˆ‘ï¼Œè¯´æœ‰ä¸€ä¸ªå¼€æºçš„æ³¨å†Œæœºã€‚å½“æ—¶ä¹Ÿæ²¡æ—¶é—´æµ‹è¯•ä¸€ç›´æ²¡å†™æ–‡ç« ï¼
æœ€è¿‘å‡ å¤©æˆ‘çš„Navicatå‡ºé—®é¢˜äº†ï¼Œæ‰“ç®—æ–°è£…ä¸€ä¸‹ï¼æ­£å¥½è¯•ä¸€è¯•è¿™ä¸ªå¼€æºä»£ç ï¼æœç„¶å¯è¡Œï¼ï¼
åšä¸»äº²æµ‹ï¼šNavicat Premium 12.1.22 + Windows 10 X64 æ¿€æ´»æˆåŠŸï¼
å¼€æºåœ°å€
https://github.com/DoubleLabyrinth/navicat-keygen
è½¯ä»¶ä¸‹è½½
è®¿é—® https://www.navicat.com.cn/productsï¼Œé€‰æ‹©è‡ªå·±éœ€è¦çš„äº§å“ç‚¹å‡»ã€å…è´¹è¯•ç”¨ã€‘å³å¯ä¸‹è½½è½¯ä»¶ï¼
æ“ä½œè¿‡ç¨‹
1ï¼‰è®¿é—®åœ°å€ï¼Œä¸‹è½½PJç¨‹åºï¼æ³¨æ„X64çš„ç³»ç»Ÿè¦é€‰æ‹©X64çš„è½¯ä»¶ï¼
2ï¼‰å°†è½¯ä»¶åŒ…è§£å‹ï¼Œå°†é‡Œé¢çš„2ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°Dç›˜ï¼
3ï¼‰ä»¥ç®¡ç†å‘˜è¿è¡Œ CMD å‘½ä»¤ï¼ˆæŒ‰Win + Xï¼Œé€‰æ‹© å‘½ä»¤æç¤ºç¬¦ï¼ˆç®¡ç†å‘˜ï¼‰ï¼‰
4ï¼‰åˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼å…¶ä¸­ç¬¬ä¸€æ¡å‘½ä»¤ä¸­å¼•å·ä¸­çš„å†…å®¹ä¼ŸNavicatå®‰è£…ç›®å½•ï¼
navicat-patcher.exe &amp;quot;C:\Program Files\PremiumSoft\Navicat Premium 12&amp;quot;
navicat-keygen.exe -text ./RegPrivateKey.pem

æ‰§è¡Œç¬¬äºŒæ¡å‘½ä»¤åï¼Œé€‰æ‹©äº§å“å’Œè¯­è¨€ä»¥åŠç‰ˆæœ¬ï¼æœ€åç”Ÿæˆä¸€ä¸ªæ¿€æ´»ç ã€‚
Select Navicat product:
0. DataModeler
1. Premium
2. MySQL
3. PostgreSQL
4. Oracle
5. SQLServer
6. SQLite
7. MariaDB
8. MongoDB
9. ReportViewer
 
(Input index)&amp;amp;gt; 1
 
Select product language:
0. English
1. Simplified Chinese
2. Traditional Chinese
3. Japanese
4. Polish
5. Spanish
6. French
7. German
8. Korean
9. Russian
10. Portuguese
 
(Input index)&amp;amp;gt; 1
 
(Input major version number, range: 0 ~ 15, default: 12)&amp;amp;gt; 12
 
Serial number:
NAVO-2ORP-IN5A-GQEE

5ï¼‰å¯åŠ¨Navicatç¨‹åº â€“ èœå• â€“ å¸®åŠ© â€“ æ³¨å†Œã€‚å°†åºåˆ—å·å¡«å…¥ã€‚
6ï¼‰ç”µè„‘æ–­ç½‘ï¼Œç„¶åç‚¹å‡»ã€æ¿€æ´»ã€‘- é€‰æ‹©ã€æ‰‹åŠ¨æ¿€æ´»ã€‘ä¼šç”Ÿæˆè¯·æ±‚ç 
7ï¼‰å°†è¯·æ±‚ç å¤åˆ¶åˆ°å‘½ä»¤æç¤ºç¬¦æ¡†å†…ï¼ŒæŒ‰2æ¬¡å›è½¦ï¼ä¼šç”Ÿæˆæ¿€æ´»ç ï¼
8ï¼‰å°†æ¿€æ´»ç å¤åˆ¶åˆ°å‡çº§æ¡†å†…ï¼Œç‚¹å‡»ã€æ¿€æ´»ã€‘ï¼Œç„¶åæ¿€æ´»æˆåŠŸï¼

æ³¨æ„äº‹é¡¹
1ï¼‰ä¹‹å‰ä½¿ç”¨å…¶ä»–ç ´è§£ç‰ˆï¼Œéœ€è¦å¸è½½åé‡å¯ç”µè„‘ï¼Œç„¶ååˆ é™¤åŸå®‰è£…ç›®å½•ã€‚
2ï¼‰æ“ä½œè¿‡ç¨‹ä¸­é”™è¯¯ï¼Œä»å¤´å†æ¥ä¸€æ¬¡å³å¯ã€‚
3ï¼‰PJè¾“å…¥çš„ç»„ç»‡åä¸è¦å¤ªé•¿ï¼

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://chwl66.github.io/post/GLrSQjpqd">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://chwl66.github.io/post/one-scf">
                        åˆ©ç”¨å¾®è½¯ OneDrive API å’Œè…¾è®¯äº‘ SCF å…è´¹æ­å»ºä¸ªäººç½‘ç›˜
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-11-21</time>
                    
                </div>
                <div class="post-article">
                    
                        <a href="https://chwl66.github.io/post/one-scf" class="post-feature-image" style="background-image:url(https://ae04.alicdn.com/kf/H31fa58e3c58a4b189ac37c25508b9715W.png) ">
                        </a>
                        
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            SCF ç®€ä»‹
è…¾è®¯äº‘äº‘å‡½æ•°ï¼ˆServerless Cloud Functionï¼ŒSCFï¼‰æ˜¯è…¾è®¯äº‘ä¸ºä¼ä¸šå’Œå¼€å‘è€…ä»¬æä¾›çš„æ— æœåŠ¡å™¨æ‰§è¡Œç¯å¢ƒï¼Œå¸®åŠ©æ‚¨åœ¨æ— éœ€è´­ä¹°å’Œç®¡ç†æœåŠ¡å™¨çš„æƒ…å†µä¸‹è¿è¡Œä»£ç ï¼Œæ˜¯å®æ—¶æ–‡ä»¶å¤„ç†å’Œæ•°æ®å¤„ç†ç­‰åœºæ™¯ä¸‹ç†æƒ³çš„è®¡ç®—å¹³å°ã€‚æ‚¨åªéœ€ä½¿ç”¨ SCF å¹³å°æ”¯æŒçš„è¯­è¨€ç¼–å†™æ ¸å¿ƒä»£ç å¹¶è®¾ç½®ä»£ç è¿è¡Œçš„æ¡ä»¶ï¼Œå³å¯åœ¨è…¾è®¯äº‘åŸºç¡€è®¾æ–½ä¸Šå¼¹æ€§ã€å®‰å…¨åœ°è¿è¡Œä»£ç ã€‚
æ— æœåŠ¡å™¨ï¼ˆServerlessï¼‰ä¸æ˜¯è¡¨ç¤ºæ²¡æœ‰æœåŠ¡å™¨ï¼Œè€Œè¡¨ç¤ºå½“æ‚¨åœ¨ä½¿ç”¨ Serverless æ—¶ï¼Œæ‚¨æ— éœ€å…³å¿ƒåº•å±‚èµ„æºï¼Œä¹Ÿæ— éœ€ç™»å½•æœåŠ¡å™¨å’Œä¼˜åŒ–æœåŠ¡å™¨ï¼Œåªéœ€å…³æ³¨æœ€æ ¸å¿ƒçš„ä»£ç ç‰‡æ®µï¼Œå³å¯è·³è¿‡å¤æ‚çš„ã€ç¹ççš„åŸºæœ¬å·¥ä½œã€‚æ ¸å¿ƒçš„ä»£ç ç‰‡æ®µå®Œå…¨ç”±äº‹ä»¶æˆ–è€…è¯·æ±‚è§¦å‘ï¼Œå¹³å°æ ¹æ®è¯·æ±‚è‡ªåŠ¨å¹³è¡Œè°ƒæ•´æœåŠ¡èµ„æºã€‚Serverless æ‹¥æœ‰è¿‘ä¹æ— é™çš„æ‰©å®¹èƒ½åŠ›ï¼Œç©ºé—²æ—¶ï¼Œä¸è¿è¡Œä»»ä½•èµ„æºã€‚ä»£ç è¿è¡Œæ— çŠ¶æ€ï¼Œå¯ä»¥è½»æ˜“å®ç°å¿«é€Ÿè¿­ä»£ã€æé€Ÿéƒ¨ç½²ã€‚
è…¾è®¯äº‘ SCF ç›®å‰ä»åœ¨ å…¬æµ‹ é˜¶æ®µï¼Œæ‰€æœ‰ç”¨æˆ·å¯å…è´¹ä½¿ç”¨ï¼Œç»“æŸæ—¥æœŸå¾…å®šã€‚å…¬æµ‹ç»“æŸåï¼Œæ¯æœˆä»å¯äº«å—è¶³é‡çš„ å…è´¹èµ„æºä½¿ç”¨é‡å’Œå…è´¹è°ƒç”¨æ¬¡æ•°ï¼Œä½†æ”¶å– å¤–ç½‘å‡ºæµé‡ è´¹ç”¨ã€‚



èµ„æºç±»å‹
æ¯æœˆå…è´¹é¢åº¦




èµ„æºä½¿ç”¨é‡
40 ä¸‡ GBs


è°ƒç”¨æ¬¡æ•°
100 ä¸‡æ¬¡



æ‰€è°“å¤–ç½‘å‡ºæµé‡ï¼Œå³ç¨‹åºé€šè¿‡ SCF è®¿é—®å¤–éƒ¨ç½‘ç»œçš„æµé‡ï¼Œå¯¹äºæœ¬ç¨‹åºå³è¯·æ±‚å¾®è½¯ API çš„æµé‡ï¼Œæ¯æ¬¡è°ƒç”¨ä»å‡  B åˆ°å‡  KB ä¸ç­‰ï¼›æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ç›´æ¥ä¸å¾®è½¯äº¤äº’ï¼Œä¸ç»è¿‡ SCFã€‚
ä¸‹å›¾ï¼ˆè€å›¾å¯èƒ½ä¸æè¿°ä¸ç¬¦ï¼‰æ˜¯æˆ‘ä¸€å¤©çš„ä½¿ç”¨é‡ï¼Œå¤§æ¦‚è°ƒç”¨äº† 10000 æ¬¡ï¼Œå¦‚æœæ˜¯ 30 å¤©å°±æ˜¯ 30 ä¸‡æ¬¡ï¼Œè¿˜ä¸åˆ°å…è´¹é¢åº¦çš„ 1/3ã€‚èµ„æºä½¿ç”¨é‡ 1000 GBsï¼Œ30 å¤©å°±æ˜¯ 3 ä¸‡ GBsï¼Œè¿œä½äº 40 ä¸‡ GBsã€‚å¤–ç½‘å‡ºæµé‡ 0.05G ï¼Œä¸€ä¸ªæœˆå¤§æ¦‚æ˜¯ 1.5 Gï¼ŒæŒ‰ç…§ æ­£å¼æ”¶è´¹æ ‡å‡† 0.8 å…ƒ / Gï¼Œæ¯æœˆè¦æ”¯ä»˜ 1.2 å…ƒçš„å‡ºæµé‡è´¹ç”¨ï¼Œå®Œå…¨å¯ä»¥æ¥å—ï¼ˆç›®å‰ä¸ä¼šæ”¶å–ï¼‰ã€‚

è·å– Onedrive è´¦å·
æ—¢ç„¶æ˜¯åˆ©ç”¨ Onedriveï¼Œé¦–å…ˆè¦è·å–ä¸€ä¸ªè´¦å·ï¼Œæ”¯æŒä¸ªäººã€ä¼ä¸šå’Œæ•™è‚²ç‰ˆã€‚
åˆ›å»ºå‡½æ•°æœåŠ¡
æœ‰äº†è´¦å·åå°±å¯ä»¥åˆ›å»ºå‡½æ•°äº†ã€‚ç™»å½• è…¾è®¯äº‘ SCF æ§åˆ¶å°ï¼ˆåœ¨æ­¤ä¹‹å‰è¦å®Œæˆè…¾è®¯äº‘ å®åè®¤è¯ï¼‰ï¼Œç‚¹å‡»å·¦ä¾§èœå•æ çš„ å‡½æ•°æœåŠ¡ï¼Œæ¥ç€ç‚¹å‡»é¡¶æ çš„åœ°åŒºé€‰æ‹©ä¸‹æ‹‰æ¡†ï¼Œé€‰æ‹© é¦™æ¸¯ï¼Œå› ä¸ºå¤§é™†åŒºåŸŸåœ¨ç»‘å®šåŸŸåæ—¶éœ€è¦å¤‡æ¡ˆï¼Œå¦‚æœä½ æ‹¥æœ‰å·²å¤‡æ¡ˆçš„åŸŸåï¼Œåˆ™å¯ä»¥é€‰æ‹©å›½å†…ï¼Œå½“ç„¶ä¸ç»‘å®šåŸŸåä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚æ¥ç€ç‚¹å‡»è“è‰²çš„ æ–°å»º æŒ‰é’®ï¼Œåˆ›å»ºå‡½æ•°ã€‚

éšååœ¨æ–°å»ºå‡½æ•°é¡µé¢å¡«å†™ å‡½æ•°åç§°ï¼Œåå­—éšæ„ï¼›è¿è¡Œç¯å¢ƒ é€‰æ‹© Php 7.2ï¼›åˆ›å»ºæ–¹å¼ é€‰æ‹© æ¨¡æ¿å‡½æ•°ï¼›é€‰æ‹© helloworld æ¨¡æ¿ï¼Œæœ€åç‚¹å‡»æœ€ä¸‹æ–¹çš„ ä¸‹ä¸€æ­¥ã€‚è¿›å…¥ â‘¡ å‡½æ•°é…ç½® é¡µé¢åä¸åšä»»ä½•ä¿®æ”¹ï¼Œç›´æ¥ç‚¹å‡» å®Œæˆã€‚

ä¸Šä¼ å‡½æ•°ä»£ç 
ä¸‹è½½å¹¶è§£å‹ OneDrive_SCFã€‚éšåï¼Œè¿›å…¥ SCF å‡½æ•°ä»£ç  é¢æ¿ï¼Œå°† æäº¤æ–¹æ³•ä¸‹æ‹‰æ¡† çš„å€¼æ”¹ä¸º æœ¬åœ°ä¸Šä¼ æ–‡ä»¶å¤¹ï¼Œéšåç‚¹å‡» ä¸Šä¼ ï¼Œé€‰æ‹© è§£å‹å¥½çš„æ–‡ä»¶å¤¹ï¼Œæœ€åç‚¹å‡» ä¿å­˜ã€‚æ³¨æ„ï¼Œè§£å‹åæŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦åŒ…å«ä¸¤å±‚æ–‡ä»¶å¤¹ï¼Œå¦‚æœæ˜¯ï¼Œä¸Šä¼ å†…å±‚ã€‚

é…ç½®ç¯å¢ƒå˜é‡
è¿›å…¥ å‡½æ•°é…ç½® é¢æ¿ï¼Œç‚¹å‡»é è¿‘å³ä¸Šè§’çš„ ç¼–è¾‘ æŒ‰é’®ã€‚

å®‰è£…å‰ï¼Œåœ¨ç¯å¢ƒå˜é‡é‡Œæ·»åŠ SecretIdä¸SecretKeyï¼ˆåœ¨ https://console.cloud.tencent.com/cam/capi è¿™é‡Œç”Ÿæˆï¼‰ï¼Œè·å¾—tokenåï¼Œç¨‹åºä¼šè‡ªåŠ¨æŒ‰128å­—èŠ‚åˆ†å¼€ï¼Œæ·»åŠ åˆ°ç¯å¢ƒå˜é‡çš„t1-t7(ä¸ªäººå¸æˆ·åªåˆ°t4)  åœ¨æ–°é¢æ¿ä¸­ï¼Œå°† å†…å­˜ ä¿®æ”¹ä¸º 512Mï¼Œå½“ç„¶ 64M ä¹Ÿæ˜¯å¯ä»¥è¿è¡Œçš„ï¼Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå†…å­˜è¶Šå¤§å¯ç”¨çš„å…è´¹æ—¶é•¿è¶Šå°‘ï¼›è¶…æ—¶æ—¶é—´ å¡«å†™ 30ï¼Œéšåæ·»åŠ å‡ ä¸ªç¯å¢ƒå˜é‡ï¼Œå®ƒä»¬çš„åŠŸèƒ½å¦‚ä¸‹ï¼š



åç§°
å«ä¹‰
å¤‡æ³¨
ç¤ºä¾‹




sitename
ç«™ç‚¹åç§°
æ— 
æˆ‘çš„ç½‘ç›˜


public_path
è¦å±•ç¤ºçš„æ ¹è·¯å¾„
æ— 
/


private_path
è¦å±•ç¤ºçš„æ ¹è·¯å¾„
ä½¿ç”¨è‡ªå®šä¹‰åŸŸåæ—¶å¿…é¡»è®¾ç½®
/


imgup_path
å›¾åºŠè·¯å¾„
å…¶ä»–ç½‘é¡µå¯ä»¥å¼•ç”¨ä¸Šä¼ çš„å›¾ç‰‡
/ å›¾åºŠ


passfile
å¯†ç æ–‡ä»¶åç§°
åœ¨æŸç›®å½•ä¸‹æ·»åŠ è¯¥æ–‡ä»¶ï¼Œé‡Œé¢å†™å…¥å¯†ç å³å¯åŠ å¯†æ–‡ä»¶å¤¹
password.txt


admin
ç®¡ç†å‘˜å¯†ç 
ç®¡ç†å‘˜ç™»å½•ååŠŸèƒ½æ›´å¤š
1234


adminloginpage
ç®¡ç†ç™»å½•é¡µ
ç™»å½•çš„é¡µé¢ä¸å†æ˜¯&#39;?admin&#39;ï¼Œè€Œæ˜¯æ­¤è®¾ç½®çš„å€¼ã€‚å¦‚æœè®¾ç½®ï¼Œç™»å½•æŒ‰é’®åŠé¡µé¢éšè—





æ·»åŠ è§¦å‘æ–¹å¼
è¿›å…¥å‡½æ•°æœåŠ¡çš„ è§¦å‘æ–¹å¼ é¢æ¿ï¼Œç‚¹å‡» æ·»åŠ è§¦å‘æ–¹å¼ã€‚é€‰æ‹©è§¦å‘æ–¹å¼ä¸‹æ‹‰æ¡†ä¸­çš„ APIç½‘å…³è§¦å‘å™¨ï¼Œå‹¾é€‰ä¸‹æ–¹çš„ å¯ç”¨é›†æˆå“åº”ï¼Œç‚¹å‡» ä¿å­˜ã€‚

ç¨ç­‰ç‰‡åˆ»ï¼Œä¸‹æ–¹ä¼šå‡ºç°ä¸€ä¸ª è®¿é—®è·¯å¾„ï¼Œç‚¹å‡»æ‰“å¼€å®ƒã€‚

å…³è”ç½‘ç›˜
æ‰“å¼€é¡µé¢åï¼Œé€‰æ‹©OneDriveçš„ç‰ˆæœ¬

ç¡®è®¤åç­‰å¾…è·³è½¬ï¼Œåœ¨æ‰“å¼€çš„å¾®è½¯è´¦å·ç™»å½•é¡µé¢ä¸­ï¼Œå¡«å†™ä½ çš„ Onedrive è´¦å·å’Œå¯†ç ï¼Œå®Œæˆç™»å½•ã€‚
å¼¹å‡ºæ¥æˆæƒç‚¹å‡»æ¥å—

å®Œæˆåå³ä¼šè·³è½¬åˆ° refresh token ,ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†æ®µå¡«å†™ refresh token åˆ°é…ç½®ä¸­ï¼Œ5såå°±ä¼šè·³è½¬åˆ°ç½‘ç›˜é¡µé¢ã€‚


è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰
è¿›å…¥å‡½æ•°æœåŠ¡çš„ è§¦å‘æ–¹å¼ é¢æ¿ï¼Œç‚¹å‡»æ‰“å¼€ SCF_API_SERVICEã€‚

æ‰“å¼€æœåŠ¡ç•Œé¢çš„ è‡ªå®šä¹‰åŸŸå é¢æ¿ï¼Œç‚¹å‡» æ–°å»ºã€‚

åœ¨æ·»åŠ åŸŸåå¯¹è¯æ¡†ä¸­ï¼Œå¡«å†™ä½ çš„ åŸŸåï¼Œåè®® é€‰æ‹© httpï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ httpsï¼Œåˆ™å¿…é¡»åœ¨è…¾è®¯äº‘ ç”³è¯·æˆ–ä¸Šä¼  SSL è¯ä¹¦ï¼Œå¦‚æœä½ å·²ç»åœ¨å…¶ä»–å¹³å°ç”³è¯·è¿‡æ¨èç›´æ¥ä¸Šä¼ ï¼Œå› ä¸ºç”³è¯·ä¸€èˆ¬è¦ç­‰å¾…æ•°å°æ—¶æ‰èƒ½å®Œæˆã€‚æœªè¿›è¡Œä¸Šè¿°æ“ä½œä½ çœ‹åˆ°çš„ è¯ä¹¦ä¸‹æ‹‰æ¡† é‡Œå°†ä¼šæ˜¯æ— ã€‚ç½‘ç»œç±»å‹å‹¾é€‰ å¤–ç½‘ã€‚é€‰æ‹© è‡ªå®šä¹‰è·¯å¾„æ˜ å°„ï¼Œæ·»åŠ ä¸€æ¡è®°å½•ï¼Œè·¯å¾„ä¸º /ï¼ŒæŒ‡å‘ å‘å¸ƒ ç¯å¢ƒã€‚

æ‰“å¼€ä½ çš„åŸŸåè§£ææœåŠ¡å•†æ§åˆ¶å°ï¼Œåœ¨åŸŸåè§£æåˆ—è¡¨é‡Œæ·»åŠ ä¸€æ¡ CNAME è®°å½•ï¼Œå€¼ä¾¿æ˜¯å›¾ä¸­ä¸Šæ–¹çš„ å¤–ç½‘äºŒçº§åŸŸåã€‚æœ€åç‚¹å‡» æäº¤ã€‚
è¿›å…¥ ç®¡ç† API é¢æ¿ï¼Œç‚¹å‡» ç¼–è¾‘ã€‚

åœ¨ å‰ç«¯é…ç½® é¢æ¿ä¸­ï¼Œå°†è·¯å¾„æ”¹ä¸º /ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚

åœ¨ åç«¯é…ç½® ä¸­ï¼Œä¿è¯å·²å‹¾é€‰ å¯ç”¨é›†æˆå“åº” åç‚¹å‡» ä¸‹ä¸€æ­¥ã€‚

åœ¨ å“åº”ç»“æœ é¢æ¿ï¼Œå°† è¿”å›ç±»å‹ æ”¹ä¸º HTMLï¼Œç‚¹å‡» å®Œæˆã€‚

åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ï¼Œç‚¹å‡» å‰å¾€å‘å¸ƒæœåŠ¡ã€‚

åœ¨ æœåŠ¡ä¿¡æ¯ é¢æ¿ï¼Œç‚¹å‡»é è¿‘ å³ä¸Šè§’ çš„ å‘å¸ƒ æŒ‰é’®ã€‚

åœ¨å¼¹å‡ºçš„ å‘å¸ƒæœåŠ¡ å¯¹è¯æ¡†ä¸­ï¼Œå°† å‘å¸ƒç¯å¢ƒ æ”¹ä¸º å‘å¸ƒï¼Œå¤‡æ³¨ éšæ„å¡«å†™ï¼Œæœ€åç‚¹å‡» æäº¤ã€‚

ç°åœ¨å°±å¯ä»¥é€šè¿‡è‡ªå®šä¹‰åŸŸåè®¿é—®ä½ çš„ç½‘ç›˜äº†ã€‚
ä½¿ç”¨ Github Pages ç¼©çŸ­é•¿é“¾æ¥ï¼ˆå¯é€‰ï¼‰
å¦‚æœä½ æ²¡æœ‰åŸŸåå’ŒæœåŠ¡å™¨ï¼Œå¯ä»¥é€šè¿‡ Github Pages è·³è½¬çš„æ–¹å¼ï¼Œé€‚å½“ç¼©çŸ­é¦–æ¬¡è®¿é—®çš„è·¯å¾„é•¿åº¦ï¼Œæœ€ç»ˆå¯ä»¥é€šè¿‡ username.github.io æ‰“å¼€ä½ çš„ç½‘ç›˜ã€‚
æ³¨å†Œå¹¶ç™»å½• Githubï¼Œéšåæ‰“å¼€ è¯¥ä»“åº“ï¼Œç‚¹å‡»é è¿‘å³ä¸Šè§’çš„ Forkã€‚ç¨ç­‰ç‰‡åˆ»ï¼Œæ‰“å¼€é¡µé¢ä¸­éƒ¨çš„ index.htmlã€‚

ç‚¹å‡»é è¿‘ å³ä¸Šè§’ çš„ é“…ç¬” æŒ‰é’®ï¼Œç¼–è¾‘è¯¥æ–‡ä»¶ã€‚

å°†ä½ çš„ å‡½æ•° API ç½‘å…³è®¿é—®è·¯å¾„ æ›¿æ¢åˆ°æ–‡ä»¶ä¸­ã€‚

ä¿®æ”¹å®Œæ¯•åç‚¹å‡»é è¿‘é¡µé¢æœ€ä¸‹æ–¹çš„ Commit changesã€‚

ç‚¹å‡»é è¿‘å³ä¸Šè§’çš„ Settingsï¼Œå°† Repository name æ”¹æˆ ä½ çš„ Github ç”¨æˆ·å.github.ioï¼Œéšåç‚¹å‡» Renameã€‚

ä¸‹æ‹‰è¯¥é¡µé¢ï¼Œæ‰¾åˆ° Github Pagesï¼Œå°† Source ä¸‹æ‹‰æ¡†çš„å€¼æ”¹æˆ master branchï¼Œå¦‚æœæ²¡æœ‰åˆ™æ— éœ€ä¿®æ”¹ã€‚

ç°åœ¨ï¼Œå°±å¯ä»¥é€šè¿‡ ä½ çš„ Github ç”¨æˆ·å.github.io è®¿é—®ç½‘ç›˜äº†ã€‚

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://chwl66.github.io/post/one-scf">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://chwl66.github.io/post/hello-gridea">
                        Hello Gridea
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2018-12-12</time>
                    
                        <a href="https://chwl66.github.io/tag/FX9cSONM-" class="post-tag i-tag
                            i-tag-info">
            #Gridea
        </a>
                        
                </div>
                <div class="post-article">
                    
                        <a href="https://chwl66.github.io/post/hello-gridea" class="post-feature-image" style="background-image:url(https://chwl66.github.io/post-images/hello-gridea.png) ">
                        </a>
                        
                            <div class="post-content">
                                
                                    <div class="post-content-abstract">
                                        <p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>

                                    </div>
                                    
                                            <a class="btn btn-text" href="https://chwl66.github.io/post/hello-gridea">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- ç¿»é¡µ -->
                
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- ä¸ªäººä¿¡æ¯ -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://chwl66.github.io/images/avatar.png?v=1574387850326)">
        </div>
        <h1 class="id_card-title">
            æ¸©æ•…çŸ¥æ–°
        </h1>
        <h2 class="id_card-description">
            æ¸©æ•…è€ŒçŸ¥æ–°
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- å…¬å‘Šæ  -->
                        

                </div>
            </div>



            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://chwl66.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>